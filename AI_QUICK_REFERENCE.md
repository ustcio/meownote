# AI API é›†æˆ - å¿«é€Ÿå‚è€ƒå¡ç‰‡

## ğŸ¯ ä¸€å¥è¯æ€»ç»“
é‡‘ä»·æ•°æ®ç°åœ¨æäº¤ç»™ **é€šä¹‰åƒé—® Max** å’Œ **è±†åŒ…** ä¸¤ä¸ªçœŸå® AI æ¨¡å‹è¿›è¡Œå¹¶è¡Œåˆ†æã€‚

---

## ğŸ”‘ å…³é”®ä¿¡æ¯

### AI æ¨¡å‹é…ç½®
| æ¨¡å‹ | ç‰ˆæœ¬ | æƒé‡ | å‡†ç¡®ç‡ | API ç«¯ç‚¹ |
|------|------|------|--------|---------|
| **é€šä¹‰åƒé—®** | `qwen3-max-2026-01-23` | 50% | 82% | dashscope.aliyuncs.com/compatible-mode/v1 (OpenAI å…¼å®¹) |
| **è±†åŒ…** | `doubao-seed-2-0-pro-260215` | 35% | 70% | ark.cn-beijing.volces.com |
| æŠ€æœ¯åˆ†æ | æœ¬åœ° | 15% | 68% | N/A |

### ç¯å¢ƒå˜é‡
```bash
DASHSCOPE_API_KEY=ä½ çš„é€šä¹‰åƒé—®å¯†é’¥
DOUBAO_API_KEY=ä½ çš„è±†åŒ…å¯†é’¥
```

---

## ğŸš€ 3 åˆ†é’Ÿå¿«é€Ÿéƒ¨ç½²

```bash
# 1. é…ç½®å¯†é’¥
wrangler secret put DASHSCOPE_API_KEY
wrangler secret put DOUBAO_API_KEY

# 2. æœ¬åœ°æµ‹è¯•
export DASHSCOPE_API_KEY="your-key"
export DOUBAO_API_KEY="your-key"
node test-ai-api.js

# 3. éƒ¨ç½²
npm run deploy
```

---

## ğŸ“Š æ ¸å¿ƒä»£ç ä½ç½®

### AI å¼•æ“
ğŸ“ [`src/lib/gold-analysis/ai-engine.ts`](src/lib/gold-analysis/ai-engine.ts)

**å…³é”®æ–¹æ³•**:
- `analyzeMarket()` - ä¸»å…¥å£ï¼ˆç¬¬ 98 è¡Œï¼‰
- `callQwenModel()` - é€šä¹‰åƒé—®è°ƒç”¨ï¼ˆç¬¬ 519 è¡Œï¼‰
- `callDoubaoModel()` - è±†åŒ…è°ƒç”¨ï¼ˆç¬¬ 568 è¡Œï¼‰
- `parseAIResponse()` - å“åº”è§£æï¼ˆç¬¬ 835 è¡Œï¼‰

### æµ‹è¯•è„šæœ¬
ğŸ“ [`test-ai-api.js`](test-ai-api.js)

---

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### åœ¨ Worker ä¸­è°ƒç”¨
```javascript
import { goldAIEngine } from './src/lib/gold-analysis/ai-engine';

// åœ¨ scheduled handler ä¸­
const result = await goldAIEngine.analyzeMarket(
  currentData,
  priceHistory,
  env  // åŒ…å« API å¯†é’¥
);
```

### åˆ†ææµç¨‹
```
1. é‡‡é›†é‡‘ä»·æ•°æ®
   â†“
2. è®¡ç®—æŠ€æœ¯æŒ‡æ ‡ (RSI, MACD, å¸ƒæ—å¸¦ç­‰)
   â†“
3. æ„å»ºæ ‡å‡†åŒ–è¾“å…¥
   â†“
4. å¹¶è¡Œè°ƒç”¨ 3 ä¸ª AI æ¨¡å‹
   â†“
5. èåˆé¢„æµ‹ç»“æœ
   â†“
6. ç”Ÿæˆäº¤æ˜“ä¿¡å· (ç½®ä¿¡åº¦â‰¥0.65)
```

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

- **å“åº”æ—¶é—´**: ~1.5 ç§’ï¼ˆå¹¶è¡Œè°ƒç”¨ï¼‰
- **ç»¼åˆå‡†ç¡®ç‡**: 74-76%
- **å•æ¬¡æˆæœ¬**: Â¥0.023
- **æ¨èé¢‘ç‡**: æ¯ 5 åˆ†é’Ÿ

---

## âš ï¸ å¸¸è§é—®é¢˜é€ŸæŸ¥

### Q: API å¯†é’¥é”™è¯¯ï¼Ÿ
```bash
wrangler secret list
wrangler secret put DASHSCOPE_API_KEY
```

### Q: æµ‹è¯•å¤±è´¥ï¼Ÿ
```bash
# æ£€æŸ¥å¯†é’¥æ˜¯å¦æ­£ç¡®
node test-ai-api.js
```

### Q: æˆæœ¬å¤ªé«˜ï¼Ÿ
è°ƒæ•´åˆ†æé¢‘ç‡ï¼š
- æ¯ 2 åˆ†é’Ÿ â†’ Â¥518/æœˆ
- æ¯ 5 åˆ†é’Ÿ â†’ Â¥207/æœˆ âœ…
- æ¯ 10 åˆ†é’Ÿ â†’ Â¥104/æœˆ

---

## ğŸ“š å®Œæ•´æ–‡æ¡£

- ğŸ“– [éƒ¨ç½²æŒ‡å—](AI_DEPLOYMENT_GUIDE.md) - è¯¦ç»†æ­¥éª¤
- ğŸ“Š [é›†æˆæŠ¥å‘Š](AI_INTEGRATION_SUMMARY.md) - æŠ€æœ¯ç»†èŠ‚
- ğŸ”§ [æµ‹è¯•è„šæœ¬](test-ai-api.js) - éªŒè¯å·¥å…·

---

## ğŸ¯ ä¸‹ä¸€æ­¥

1. âœ… è·å– API å¯†é’¥
2. âœ… é…ç½®ç¯å¢ƒå˜é‡
3. âœ… è¿è¡Œæœ¬åœ°æµ‹è¯•
4. âœ… éƒ¨ç½²åˆ°ç”Ÿäº§
5. âœ… ç›‘æ§æ€§èƒ½å’Œæˆæœ¬

---

**ç‰ˆæœ¬**: v2.0.0 | **æ›´æ–°**: 2026-02-19 | **çŠ¶æ€**: âœ… å¼€å‘å®Œæˆ
