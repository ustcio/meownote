---
import { getLangFromUrl, useTranslations } from '@i18n';
import Icon from '@components/ui/Icon.astro';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const features = [
  {
    icon: 'zap',
    title: lang === 'zh' ? '智能对话' : 'Smart Conversation',
    description: lang === 'zh' 
      ? '基于先进大语言模型，理解上下文，提供精准回答' 
      : 'Powered by advanced LLMs, understands context and delivers precise answers',
  },
  {
    icon: 'shield',
    title: lang === 'zh' ? '隐私优先' : 'Privacy First',
    description: lang === 'zh' 
      ? '端到端加密，您的数据只属于您自己' 
      : 'End-to-end encryption. Your data belongs only to you.',
  },
  {
    icon: 'rocket',
    title: lang === 'zh' ? '极速响应' : 'Lightning Fast',
    description: lang === 'zh' 
      ? '毫秒级响应速度，流畅的对话体验' 
      : 'Millisecond response time for seamless conversations.',
  },
  {
    icon: 'code',
    title: lang === 'zh' ? '开发者友好' : 'Developer Friendly',
    description: lang === 'zh' 
      ? '丰富的工具集，助力学术研究与日常开发' 
      : 'Rich toolkit for academic research and daily development.',
  },
];
---

<section class="features" id="features">
  <div class="features-container">
    <div class="features-header">
      <span class="features-label">{lang === 'zh' ? '核心能力' : 'Core Features'}</span>
      <h2 class="features-title">
        {lang === 'zh' ? '为创造者打造的' : 'Built for '}
        <span class="gradient-text">{lang === 'zh' ? 'AI 工作台' : 'Creators'}</span>
      </h2>
      <p class="features-subtitle">
        {lang === 'zh' 
          ? '集成多种AI能力，一站式解决您的智能需求' 
          : 'Integrating multiple AI capabilities to solve your intelligent needs in one place'}
      </p>
    </div>
    
    <div class="features-grid">
      {features.map((feature, index) => (
        <article class="feature-card" style={`--delay: ${index * 0.1}s`}>
          <div class="feature-icon">
            <Icon name={feature.icon} size={24} />
          </div>
          <h3 class="feature-title">{feature.title}</h3>
          <p class="feature-description">{feature.description}</p>
        </article>
      ))}
    </div>
  </div>
</section>

<style>
  .features {
    padding: var(--space-20) var(--space-4);
    background: var(--bg-secondary);
    position: relative;
    overflow: hidden;
  }

  @media (min-width: 768px) {
    .features {
      padding: var(--space-24) var(--space-6);
    }
  }

  @media (min-width: 1024px) {
    .features {
      padding: var(--space-32) var(--space-8);
    }
  }

  .features::before {
    content: '';
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 100%;
    max-width: 800px;
    height: 400px;
    background: radial-gradient(ellipse at center, var(--color-primary) 0%, transparent 70%);
    opacity: 0.03;
    pointer-events: none;
  }

  .features-container {
    max-width: var(--container-xl);
    margin: 0 auto;
  }

  .features-header {
    text-align: center;
    max-width: 640px;
    margin: 0 auto var(--space-16);
  }

  @media (min-width: 768px) {
    .features-header {
      margin-bottom: var(--space-20);
    }
  }

  .features-label {
    display: inline-block;
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--color-primary);
    text-transform: uppercase;
    letter-spacing: var(--tracking-wider);
    margin-bottom: var(--space-4);
  }

  .features-title {
    font-size: var(--text-3xl);
    font-weight: var(--font-bold);
    line-height: var(--leading-tight);
    color: var(--text-primary);
    margin-bottom: var(--space-4);
  }

  @media (min-width: 768px) {
    .features-title {
      font-size: var(--text-4xl);
    }
  }

  @media (min-width: 1024px) {
    .features-title {
      font-size: var(--text-5xl);
    }
  }

  .features-subtitle {
    font-size: var(--text-lg);
    color: var(--text-secondary);
    line-height: var(--leading-relaxed);
  }

  .features-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--space-6);
  }

  @media (min-width: 640px) {
    .features-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .features-grid {
      grid-template-columns: repeat(4, 1fr);
      gap: var(--space-8);
    }
  }

  .feature-card {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: var(--radius-2xl);
    padding: var(--space-8);
    text-align: center;
    transition: transform var(--duration-normal) var(--ease-default),
                box-shadow var(--duration-normal) var(--ease-default),
                border-color var(--duration-normal) var(--ease-default);
    animation: fadeInUp 0.6s var(--ease-out) var(--delay) both;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(24px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .feature-card:hover {
    transform: translateY(-8px);
    box-shadow: var(--shadow-xl);
    border-color: var(--border-hover);
  }

  .feature-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 56px;
    height: 56px;
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-accent-blue) 100%);
    border-radius: var(--radius-xl);
    color: white;
    margin-bottom: var(--space-5);
    transition: transform var(--duration-normal) var(--ease-default);
  }

  .feature-card:hover .feature-icon {
    transform: scale(1.1);
  }

  .feature-title {
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
    margin-bottom: var(--space-3);
  }

  .feature-description {
    font-size: var(--text-sm);
    color: var(--text-tertiary);
    line-height: var(--leading-relaxed);
  }
</style>
